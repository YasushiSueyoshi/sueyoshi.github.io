<!DOCTYPE html>
<html lang="ja">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="robots" content="noindex,nofollow" />
  <title>Âè£‰∏ä„Çª„É™„Éï„Åã„Çâ„Éó‚óè„Ç≠„É•‚óè„ÇíÂΩì„Å¶„Çã„ÇØ„Ç§„Ç∫</title>
  <style>
    /* PC
  ------------------------------------------------------------------- */
    body {
      font-family: sans-serif;
      padding: 0 20px;
      max-width: 1000px;
      margin: auto;
      background-color: #ffd7e7;
      color: #333;
    }

    header {
      background-color: #FF90BC;
      color: #F9F9E0;
      padding: 1em 0;
      text-align: center;
      margin-bottom: 1.5em;
      width: 100vw;
      margin-left: calc(50% - 50vw);
    }

    header h1 {
      margin: 0;
      font-size: 1.5em;
    }

    .sp_br {
      display: none;
    }

    h2 {
      text-align: center;
    }

    #quiz-container {
      background-color: #ffffff;
      border-radius: 15px;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
      width: 100%;
      max-width: 700px;
      margin: 0 auto;
      padding: 30px;
      text-align: center;
      box-sizing: border-box;
    }

    #question p {
      font-size: 1.1em;
      background-color: #F9F9E0;
      padding: 10px;
      border-left: 5px solid #8ACDD7;
    }

    #choices button {
      display: block;
      width: 100%;
      margin: 8px 0;
      padding: 10px;
      font-size: 1em;
      color: #333;
      cursor: pointer;
      border-radius: 8px;
      background-color: #fff;
      border: 2px solid #FFC0D9;
      transition: background-color 0.2s, border-color 0.2s;
    }

    #choices button:hover:not([disabled]) {
      background-color: #FFC0D9; /* Sub Color */
      border-color: #FF90BC; /* Base Color */
    }

    #choices button.correct {
      border: 2px solid red;
      background-color: #FFC0D9;
      font-weight: bold;
    }

    #choices button.incorrect {
      border: 2px solid blue;
      background-color: #ddfff6;
    }

    #choices button.correct::before {
      content: '‚óã ';
      font-weight: bold;
    }

    #choices button.incorrect::before {
      content: '√ó ';
      font-weight: bold;
    }

    button.next-question {
      background-color: #FF90BC; /* Base Color */
      border: none;
      padding: 20px 30px;
      width: 250px;
      font-size: 1em;
      font-weight: bold;
      color: #fff; /* White text for better contrast */
      border-radius: 6px;
      cursor: pointer;
      transition: background-color 0.3s ease;
      display: block;
      margin: 0 auto;
      margin-top: 1em;
      text-align: center;
    }

    button.next-question:hover {
      background-color: #e682a9; /* Darker Base Color */
    }

    button.inactive {
      opacity: 0.5;
      pointer-events: none;
    }

    button.correct,
    button.incorrect {
      -webkit-tap-highlight-color: transparent;
    }

    button.correct:focus,
    button.incorrect:focus,
    button.correct:active,
    button.incorrect:active {
      outline: none;
      box-shadow: none;
      background-color: inherit;
    }

    #result {
      font-size: 3rem;
      font-weight: bold;
      text-align: center;
    }

    .info-block {
      border: 2px solid #FFC0D9; /* Sub Color */
      border-radius: 8px;
      padding: 15px 20px;
      margin-top: 20px;
      background-color: #fefefe;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
    }

    .info-block h3 {
      margin-top: 0;
      color: #FF90BC; /* Base Color */
      font-size: 1.2em;
      font-weight: bold;
      border-bottom: 1px solid #FFC0D9; /* Sub Color */
      padding-bottom: 5px;
    }

    .info-block ul {
      list-style: none;
      padding-left: 0;
      margin-top: 10px;
    }

    .info-block li {
      padding: 0.75em 0;
      border-bottom: 1px solid #FFC0D9;
      display: flex;
      justify-content: space-between;
      align-items: baseline;
      flex-wrap: wrap;
    }

    .info-block li:last-child {
      border-bottom: none;
    }

    .info-label {
      font-weight: bold;
      color: #FF90BC;
      margin-right: 1em;
    }

    .info-value {
      text-align: right;
    }

    .info-item-themes {
      display: block;
    }

    .info-item-themes .info-value {
      text-align: left;
      padding-top: 0.5em;
    }
    .info-block .info-value a{
      color: #0017c1;
      text-decoration: none;
    }
    .info-block .info-value a:hover{
      text-decoration-line: underline;
    }

    .info-item-full {
      display: block;
      text-align: center;
    }

    a.image-search-button {
      display: inline-block;
      background-color: #FF90BC;
      color: #fff;
      text-decoration: none;
      padding: 10px 16px;
      border-radius: 6px;
      font-size: 0.95em;
      margin-top: 8px;
      transition: all 0.3s ease;
      border: 1px solid #FF90BC; /* Base Color */
    }

    a.image-search-button:hover {
      text-align: center;
      transform: scale(1.03);
    }

    .icon--external-wrapper {
      display: inline-block;
      vertical-align: text-bottom;
      margin-left: 0.25em;
    }

    .icon {
      display: inline-block;
      width: 1em;
      height: 1em;
      fill: currentColor;
    }

    .icon--16px {
      width: 16px;
      height: 16px;
    }

    @keyframes wiggle {
      0% {
        transform: rotate(0deg);
      }

      25% {
        transform: rotate(-10deg);
      }

      50% {
        transform: rotate(10deg);
      }

      75% {
        transform: rotate(-10deg);
      }

      100% {
        transform: rotate(0deg);
      }
    }

    a.image-search-button:hover::before {
      animation: wiggle 0.4s ease;
      display: inline-block;
    }

    /* „Éö„Éº„Ç∏„ÇÅ„Åè„Çä*/
    #page-peel {
      position: fixed;
      bottom: 0;
      left: 0;
      width: 400px;
      height: 400px;
      cursor: pointer;
      z-index: 9999;
      backface-visibility: hidden;
    }

    #page-peel::before {
      position: absolute;
      bottom: 0;
      left: 0;
      content: "";
      width: 15px;
      height: 15px;
      background: linear-gradient(225deg, white 50%, gray 53%, white 57%, gray 58%, white 65%);
      box-shadow: 1px -1px 0px 0px;
      transition: width 0.4s, height 0.4s;
    }

    #page-peel:hover::before {
      width: 400px;
      height: 400px;
    }

    #page-peel span {
      position: absolute;
      bottom: 80px;
      left: -30px;
      width: 300px;
      text-align: center;
      font-size: .75em;
      font-weight: bold;
      color: #333;
      transform: rotate(45deg);
      opacity: 0;
      transition:  0.4s 0.1s;
      line-height: 1;
    }

    #page-peel:hover span {
      opacity: 1;
    }

    #mode-selection {
      display: grid;
      grid-template-columns: 1fr;
      gap: 10px;
      margin-bottom: 30px;
    }

    .check_all_wrap button {
      all: revert;
      cursor: pointer;
    }

    #mode-selection h3 {
      grid-column: 1 / -1;
      /* Ë¶ãÂá∫„Åó„ÅØ2„Ç´„É©„É†„Çí„Åæ„Åü„Åê„Çà„ÅÜ„Å´ */
      text-align: center;
      margin-bottom: 5px;
    }

    #mode-selection button:hover {
      background-color: #FFC0D9; /* Sub Color */
      transform: translateY(-2px);
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }

    #mode-selection .all-series-btn {
      grid-column: 1 / -1;
      /* „Åì„ÅÆ„Éú„Çø„É≥„Å†„Åë1Ë°åÂÖ®‰Ωì„Çí‰Ωø„ÅÜ */
    }

    #series-checkboxes {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px;
      margin-bottom: 10px;
    }

    #series-checkboxes label {
      display: block;
      padding: 12px 8px;
      font-size: 0.9em;
      font-weight: bold;
      color: #FF90BC; /* Base Color */
      background-color: #fff;
      border: 2px solid #FFC0D9; /* Sub Color */
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.3s ease;
      text-align: center;
    }

    #series-checkboxes input[type="checkbox"] {
      display: none;
    }

    #series-checkboxes input[type="checkbox"]:checked+label {
      background-color: #FFC0D9; /* Sub Color */
      border-color: #FF90BC; /* Base Color */
      color: #fff;
    }

    #series-checkboxes .select-all-label {
      border-style: dashed;
    }
    #start-quiz-btn-top,
    #start-quiz-btn {
      display: block;
      width: 60%;
      margin: 0 auto;
      padding: 15px;
      font-size: 1em;
      font-weight: bold;
      color: #fff;
      background-color: #FF90BC; /* Base Color */
      border: none;
      border-radius: 8px;
      cursor: pointer;
      transition: background-color 0.3s ease;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
    }
      #start-quiz-btn-top {
        display: none;
      }

    /* „É¨„Çπ„Éù„É≥„Ç∑„Éñ
  ------------------------------------------------------------------- */
    @media screen and (max-width: 600px) {
      header {
        margin-bottom: 0;
        padding: .5em 0;
      }
      header h1 {
        font-size: 1.2em;
      }
      body {
        padding: 0 10px;
      }

      .sp_br {
        display: block;
      }

      h2 {
        font-size: 1.2em;
      }

      #series-checkboxes {
        grid-template-columns: 1fr 1fr;
        grid-auto-rows: 1fr;
        gap: 5px;
      }

      #series-checkboxes label {
        min-height: 25px;
        display: flex;
        align-items: center;
        justify-content: center;
        text-align: center;
        overflow-wrap: break-word;
        word-break: break-word;
        overflow: hidden;
        line-height: 1;
        font-size: .75em;
      }
      #start-quiz-btn-top,
      #start-quiz-btn {
        width: 65%;
        font-size: .9em;
        padding: 10px;
      }
      #start-quiz-btn-top {
        display: block;
      }

      #quiz-container {
        padding: 20px;
      }

      #question p {
        font-size: 1em;
        padding: 8px;
      }

      #choices button {
        font-size: 0.95em;
        padding: 10px;
      }

      .next-question {
        width: 100%;
        padding: 16px 20px;
        font-size: 1em;
      }

      .info-block {
        padding: 12px 14px;
      }

      a.image-search-button {
        display: block;
        text-align: center;
        margin-top: 10px;
        font-size: 0.95em;
      }

      #page-peel {
        display: none;
      }
    }
  </style>
</head>

<body>

  <div id="page-peel">
    <span>„Éó„É™„Ç≠„É•„Ç¢„Å´„Éâ„ÅØ„Åæ„Çä„Åó„ÅüÂß™Ôºà3Ê≠≥Ôºâ„Åå<br>„Å∂Âéö„ÅÑ„Éó„É™„Ç≠„É•„Ç¢Âõ≥Èëë„Åã„Çâ„ÇØ„Ç§„Ç∫Âá∫„Åó„Åæ„Åè„Çã„ÅÆ„Åß<br>ÊÄ•ÈÅΩ„Éó„É™„Ç≠„É•„Ç¢„ÅÆÂè£‰∏ä„Å®ÂêçÂâç„ÇíË¶ö„Åà„Çã„Åì„Å®„Å´„Å™„Çä‰ΩúÊàê„ÄÇ<br>NotebookLM„Åß„Éó„É™„Ç≠„É•„Ç¢ÊÉÖÂ†±„ÅÆÊï¥ÁêÜJSON‰ΩúÊàê<br>Copilot„Åßhtml/css/js‰ΩúÊàê<br>‰ΩúÊàêÁ¥Ñ6h</span>
  </div>

  <header>
    <h1>Âè£‰∏ä„Çª„É™„Éï„Åã„Çâ„Éó„É™„Ç≠„É•„Ç¢„ÇíÂΩì„Å¶„Çã„ÇØ„Ç§„Ç∫</h1>
  </header>

  <div id="mode-selection">
    <h3>Âá∫È°å„Åô„Çã„Ç∑„É™„Éº„Ç∫„ÇíÈÅ∏„Åº„ÅÜ</h3>

    <div class="check_all_wrap" style="text-align: right; margin-bottom: 15px; grid-column: 1 / -1;">ÂÖ®„Ç∑„É™„Éº„Ç∫„ÇíÈÅ∏Êäû <button
        type="button" name="check_all_on">ON</button><button type="button" name="check_all_off">OFF</button></div>

    <div id="start-quiz-top" class="start-quiz-button">
      <button id="start-quiz-btn-top" style="grid-column: 1 / -1; margin-bottom: 1em;">„Åì„ÅÆÁØÑÂõ≤„Åß„ÇØ„Ç§„Ç∫„ÇíÂßã„ÇÅ„Çã</button>
    </div>

    <div id="series-checkboxes"></div>

    <div id="start-quiz-bottom" class="start-quiz-button">
      <button id="start-quiz-btn" style="grid-column: 1 / -1;">„Åì„ÅÆÁØÑÂõ≤„Åß„ÇØ„Ç§„Ç∫„ÇíÂßã„ÇÅ„Çã</button>
    </div>

  </div>

  <a href="#" id="back-to-selection" style="display: none; text-align:center; margin: 1em 0;">„Ç∑„É™„Éº„Ç∫‰∏ÄË¶ß„Å∏Êàª„Çã</a>

  <div id="quiz-container" style="display: none;">
    <div id="question"></div>
    <div id="choices"></div>
    <div style="margin-top: 2em;">
      <button id="next-question-btn-top" class="next-question" style="display: none;">Ê¨°„ÅÆÂïèÈ°å„Å∏</button>
    </div>
    <div id="result" style="margin-top: 20px;"></div>
    <div id="details" style="margin-top: 20px;"></div>
  </div>

  <!-- ‚ñºscript„Åì„Åì„Åã„Çâ‚ñº -->
  <script>
    let isScrolling = false;
    let touchMoved = false;

    window.addEventListener('touchmove', () => {
      isScrolling = true;
    });

    window.addEventListener('touchend', () => {
      setTimeout(() => { isScrolling = false; }, 300);
    });

    let quizData = [];
    let selectedSeriesTitles = [];
    let lastCorrectCureName = null;

    function renderModeSelection(data) {
      const checkboxesContainer = document.getElementById('series-checkboxes');
      checkboxesContainer.innerHTML = ''; // Clear previous content

      // Add individual series checkboxes
      data.forEach((series, index) => {
        const id = `series-${index}`;
        const div = document.createElement('div');
        const input = document.createElement('input');
        input.type = 'checkbox';
        input.id = id;
        input.value = series.series_title;
        input.classList.add('series-checkbox');
        const label = document.createElement('label');
        label.htmlFor = id;
        const seriesNumMatch = series.series_number.match(/\d+/);
        const formattedSeriesNum = seriesNumMatch ? seriesNumMatch[0] : series.series_number;
        label.textContent = `${formattedSeriesNum}. ${series.series_title}`;
        div.appendChild(input);
        div.appendChild(label);
        checkboxesContainer.appendChild(div);
      });

      // Event listeners for ON/OFF buttons
      document.querySelector('[name="check_all_on"]').addEventListener('click', () => {
        const seriesCheckboxes = document.querySelectorAll('.series-checkbox');
        seriesCheckboxes.forEach(checkbox => {
          checkbox.checked = true;
        });
      });

      document.querySelector('[name="check_all_off"]').addEventListener('click', () => {
        const seriesCheckboxes = document.querySelectorAll('.series-checkbox');
        seriesCheckboxes.forEach(checkbox => {
          checkbox.checked = false;
        });
      });
    }

    function startQuiz() {
      const selectedCheckboxes = document.querySelectorAll('#series-checkboxes input[type="checkbox"]:checked');
      selectedSeriesTitles = Array.from(selectedCheckboxes).map(cb => cb.value).filter(val => val !== 'all');

      if (selectedSeriesTitles.length === 0) {
        alert('Âá∫È°åÁØÑÂõ≤„Çí1„Å§‰ª•‰∏äÈÅ∏Êäû„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ');
        return;
      }

      document.getElementById('mode-selection').style.display = 'none';
      document.getElementById('quiz-container').style.display = 'block';
      document.getElementById('back-to-selection').style.display = 'block';
      renderQuestion();
    }

    async function loadQuizData() {
      const response = await fetch("allstars_nanori.json");
      const data = await response.json();
      return data;
    }

    function shuffle(array) {
      return array.sort(() => Math.random() - 0.5);
    }

    function maskCureNameInCatchphrase(catchphrase, cureName) {
      if (!cureName || !catchphrase) return catchphrase || '';
      return catchphrase.replace(new RegExp(cureName, "g"), "„Ç≠„É•„Ç¢‚óè‚óè‚óè");
    }

    function getRandomQuestion() {
      const availableSeries = quizData.filter(s => selectedSeriesTitles.includes(s.series_title));
      if (availableSeries.length === 0) {
        // Fallback to all series if no valid series are selected (should not happen with the check in startQuiz)
        const allCures = quizData.flatMap(s => s.cures);
        const randomCure = allCures[Math.floor(Math.random() * allCures.length)];
        const parentSeries = quizData.find(s => s.cures.includes(randomCure));
        return {
          catchphrase: randomCure.catchphrase,
          correct: randomCure,
          choices: shuffle(parentSeries.cures.map(c => c.cure_name)),
          series: parentSeries
        };
      }

      const randomSeries = availableSeries[Math.floor(Math.random() * availableSeries.length)];
      const cures = randomSeries.cures;
      let potentialCure;

      do {
        potentialCure = cures[Math.floor(Math.random() * cures.length)];
      } while (cures.length > 1 && potentialCure.cure_name === lastCorrectCureName);

      const correctCure = potentialCure;

      return {
        catchphrase: correctCure.catchphrase,
        correct: correctCure,
        choices: shuffle(cures.map(c => c.cure_name)),
        series: randomSeries
      };
    }

    function renderQuestion() {
      document.getElementById('next-question-btn-top').style.display = 'none';
      const quiz = getRandomQuestion();
      if (!quiz) { // Handle case where no question could be generated
        document.getElementById("question").innerHTML = `<p>ÂïèÈ°å„ÅÆÁîüÊàê„Å´Â§±Êïó„Åó„Åæ„Åó„Åü„ÄÇÈÅ∏ÊäûÁØÑÂõ≤„ÇíÁ¢∫Ë™ç„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ</p>`;
        return;
      }
      lastCorrectCureName = quiz.correct.cure_name;

      const questionDiv = document.getElementById("question");
      const choicesDiv = document.getElementById("choices");
      const resultDiv = document.getElementById("result");
      const detailsDiv = document.getElementById("details");

      resultDiv.innerHTML = "";
      detailsDiv.innerHTML = "";
      choicesDiv.innerHTML = "";

      const maskedCatchphrase = maskCureNameInCatchphrase(quiz.catchphrase, quiz.correct.cure_name);
      questionDiv.innerHTML = `<p><strong>ÂïèÈ°åÔºö</strong>${maskedCatchphrase}</p>`;

      quiz.choices.forEach(name => {
        const btn = document.createElement("button");
        btn.textContent = name;

        const handleClick = () => {
          if (!isScrolling) {
            checkAnswer(name, quiz);
          }
        };

        const handleTouchEnd = (e) => {
          e.preventDefault();
          if (!isScrolling) {
            checkAnswer(name, quiz);
          }
        };

        btn.addEventListener('click', handleClick);
        btn.addEventListener('touchend', handleTouchEnd);

        // „Ç§„Éô„É≥„ÉàËß£Èô§Áî®„Å´‰øùÊåÅ
        btn._handleClick = handleClick;
        btn._handleTouchEnd = handleTouchEnd;

        choicesDiv.appendChild(btn);
      });


    }

    function getMainColorCode(colorString) {
      if (!colorString) return 'inherit';
      const colorMap = {
        "„Éî„É≥„ÇØ": "hotpink",
        "Ëµ§Á¥´": "mediumvioletred",
        "Ëµ§": "red",
        "Èùí": "blue",
        "Ê∞¥Ëâ≤": "deepskyblue",
        "Á¥´": "purple",
        "ÈªÑ": "gold",
        "„Ç™„É¨„É≥„Ç∏": "darkorange",
        "Á∑ë": "limegreen",
        "ÈªÑÁ∑ë": "yellowgreen",
        "Èªí": "black",
        "ÁôΩ": "#696969", // dimgray
        "‰π≥ÁôΩ": "#696969" // dimgray
      };

      for (const key in colorMap) {
        if (colorString.includes(key)) {
          return colorMap[key];
        }
      }
      return 'inherit';
    }































    function checkAnswer(selected, quiz) {
      const correct = quiz.correct.cure_name;
      const resultDiv = document.getElementById("result");
      const detailsDiv = document.getElementById("details");
      const buttons = document.querySelectorAll("#choices button");

      buttons.forEach(btn => {
        btn.disabled = true;

        if (btn._handleClick) {
          btn.removeEventListener('click', btn._handleClick);
          btn._handleClick = null;
        }

        if (btn._handleTouchEnd) {
          btn.removeEventListener('touchend', btn._handleTouchEnd);
          btn._handleTouchEnd = null;
        }

        if (btn.textContent === correct) {
          btn.classList.add("correct");
        } else if (btn.textContent === selected) {
          btn.classList.add("incorrect");
        } else {
          btn.classList.add("inactive"); // Êú™ÈÅ∏Êäû„ÅÆÈÅ∏ÊäûËÇ¢„Å´„Ç∞„É¨„Éº„Ç¢„Ç¶„Éà„ÇíÈÅ©Áî®
        }
      });


      const c = quiz.correct;
      const s = quiz.series;

      resultDiv.innerHTML = selected === correct
        ? `<span style='color:red;'>‚óã„Åõ„ÅÑ„Åã„ÅÑÔºÅ</span>`
        : `<span style='color:blue;'>√ó„Åñ„Çì„Å≠„Çì‚Ä¶</span>`;

      const colorName = c.main_color;
      const colorCode = getMainColorCode(colorName);

      // üéµ ‰∏ªÈ°åÊ≠å„ÅÆË°®Á§∫ÊßãÁØâ
      const externalLinkIconSvg = `<span class="icon--external-wrapper"> <svg aria-label="Êñ∞Ë¶è„Çø„Éñ„ÅßÈñã„Åç„Åæ„Åô" role="img" class="icon icon--16px icon--external"> <path xmlns="http://www.w3.org/2000/svg" d="M13 13H3V3H8V2H2V14H14V8H13V13Z" style="fill:inherit;"></path> <path xmlns="http://www.w3.org/2000/svg" d="M9.99844 2V3H12.2884L5.64844 9.65L6.34844 10.35L12.9984 3.71V6H13.9984V2H9.99844Z" style="fill:inherit;"></path> </svg> </span>`;
      let opHtml = '';
      let edHtml = '';

      for (const [key, value] of Object.entries(s.theme_songs || {})) {
        if (key.startsWith('opening')) {
          const urlKey = `${key}_youtube_url`;
          const url = s.theme_songs[urlKey];
          const cleanValue = value.replace(/https?:\/\/\S+/g, '').trim();
          if (url) {
            opHtml += `<a href="${url}" target="_blank">${cleanValue}${externalLinkIconSvg}</a><br>`;
          } else {
            opHtml += `${cleanValue}<br>`;
          }
        }
        if (key.startsWith('ending')) {
          const urlKey = `${key}_youtube_url`;
          const url = s.theme_songs[urlKey];
          const cleanValue = value.replace(/https?:\/\/\S+/g, '').trim();
          if (url) {
            edHtml += `<a href="${url}" target="_blank">${cleanValue}${externalLinkIconSvg}</a><br>`;
          } else {
            edHtml += `${cleanValue}<br>`;
          }
        }
      }

      if (!opHtml) opHtml = 'ÊÉÖÂ†±„Å™„Åó';
      if (!edHtml) edHtml = 'ÊÉÖÂ†±„Å™„Åó';


              detailsDiv.innerHTML = `
              <div class="info-block">
                <h3>Ê≠£Ëß£„Ç≠„É£„É©ÊÉÖÂ†±</h3>
                <ul>
                  <li><span class="info-label">ÂêçÂâç</span><span class="info-value"><a href="${c.cure_image}" target="_blank">${c.cure_name}${externalLinkIconSvg}</a></span></li>
                  <li><span class="info-label">Â§âË∫´Ââç</span><span class="info-value">${c.civilian_name}</span></li>
                  <li><span class="info-label">Â£∞ÂÑ™</span><span class="info-value">${c.voice_actor}</span></li>
                  <li><span class="info-label">Â≠¶Âπ¥/Âπ¥ÈΩ¢</span><span class="info-value">${c.grade_age}</span></li>
                  <li><span class="info-label">„É°„Ç§„É≥„Ç´„É©„Éº</span><span class="info-value" style="color: ${colorCode}; font-weight: bold;">${colorName || ''}</span></li>
                  <li class="info-item-themes"><span class="info-label">Âêç‰πó„Çä</span><span class="info-value">${c.catchphrase}</span></li>
                </ul>
              </div>

              <div class="info-block">
                <h3>„Ç∑„É™„Éº„Ç∫ÊÉÖÂ†±</h3>
                <ul>
                  <li><span class="info-label">„Ç∑„É™„Éº„Ç∫</span><span class="info-value">${s.series_number}</span></li>
                  <li><span class="info-label">„Çø„Ç§„Éà„É´</span><span class="info-value"><a href="${s.series_title_search_image}" target="_blank">${s.series_title}${externalLinkIconSvg}</a></span></li>
                  <li><span class="info-label">ÊîæÈÄÅÊúüÈñì</span><span class="info-value">${s.broadcast_period}</span></li>
                  <li class="info-item-themes">
                      <span class="info-label">‰∏ªÈ°åÊ≠å</span>
                      <span class="info-value">
                        OPÔºö<br>${opHtml}
                        EDÔºö<br>${edHtml}
                      </span>
                  </li>
                </ul>
              </div>
            `;
      document.getElementById('next-question-btn-top').style.display = 'block';

      // Create and append the bottom button
      const nextBtnBottom = document.createElement("button");
      nextBtnBottom.className = "next-question";
      nextBtnBottom.id = "next-question-btn-bottom";
      nextBtnBottom.textContent = "Ê¨°„ÅÆÂïèÈ°å„Å∏";

      let touchMovedOnBottomBtn = false;
      nextBtnBottom.addEventListener("touchstart", () => {
        touchMovedOnBottomBtn = false;
      }, { passive: true });

      nextBtnBottom.addEventListener("touchmove", () => {
        touchMovedOnBottomBtn = true;
      }, { passive: true });

      nextBtnBottom.addEventListener("touchend", (e) => {
        e.preventDefault();
        if (!touchMovedOnBottomBtn && !isScrolling) {
            renderQuestion();
        }
      });

      nextBtnBottom.addEventListener("click", () => {
        if (!touchMovedOnBottomBtn && !isScrolling) {
            renderQuestion();
        }
      });

      detailsDiv.appendChild(nextBtnBottom);
    }




























    loadQuizData().then(data => {
      quizData = data;
      renderModeSelection(data);

      document.querySelectorAll('#start-quiz-btn, #start-quiz-btn-top').forEach(btn => {
        btn.addEventListener('click', startQuiz);
      });

      const topBtn = document.getElementById('next-question-btn-top');
      let touchMovedOnTopBtn = false;

      topBtn.addEventListener('touchstart', () => {
        touchMovedOnTopBtn = false;
      }, { passive: true });

      topBtn.addEventListener('touchmove', () => {
        touchMovedOnTopBtn = true;
      }, { passive: true });

      topBtn.addEventListener('touchend', (e) => {
        if (!touchMovedOnTopBtn && !isScrolling) {
          e.preventDefault();
          renderQuestion();
        }
      });

      topBtn.addEventListener('click', () => {
        if (!touchMovedOnTopBtn && !isScrolling) {
          renderQuestion();
        }
      });

      document.getElementById('back-to-selection').addEventListener('click', (e) => {
        e.preventDefault();
        document.getElementById('quiz-container').style.display = 'none';
        document.getElementById('back-to-selection').style.display = 'none';
        document.getElementById('mode-selection').style.display = 'block'; // Changed from grid to block
        document.getElementById("question").innerHTML = "";
        document.getElementById("choices").innerHTML = "";
        document.getElementById("result").innerHTML = "";
        document.getElementById("details").innerHTML = "";
      });
    });
  </script>


</body>

</html>